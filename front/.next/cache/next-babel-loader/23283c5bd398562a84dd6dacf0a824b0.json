{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Eloy\\\\Desktop\\\\sgan\\\\front\\\\src\\\\modules\\\\components\\\\Modal.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport Fade from \"./Fade\";\nimport Portal from \"./Portal\";\nimport ModalBody from \"./ModalBody\";\nimport ModalHeader from \"./ModalHeader\";\nimport ModalFooter from \"./ModalFooter\";\nimport { getOriginalBodyPadding, conditionallyUpdateScrollbar, setScrollbarWidth, mapToCssModules, omit, focusableElements, TransitionTimeouts, keyCodes, targetPropType, getTarget } from \"./utils\";\n\nfunction noop() {}\n\nconst FadePropTypes = PropTypes.shape(Fade.propTypes);\nconst propTypes = {\n  isOpen: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  centered: PropTypes.bool,\n  scrollable: PropTypes.bool,\n  size: PropTypes.string,\n  toggle: PropTypes.func,\n  keyboard: PropTypes.bool,\n  role: PropTypes.string,\n  labelledBy: PropTypes.string,\n  backdrop: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf([\"static\"])]),\n  onEnter: PropTypes.func,\n  onExit: PropTypes.func,\n  onOpened: PropTypes.func,\n  onClosed: PropTypes.func,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  wrapClassName: PropTypes.string,\n  modalClassName: PropTypes.string,\n  backdropClassName: PropTypes.string,\n  contentClassName: PropTypes.string,\n  external: PropTypes.node,\n  fade: PropTypes.bool,\n  cssModule: PropTypes.object,\n  zIndex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  backdropTransition: FadePropTypes,\n  modalTransition: FadePropTypes,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func]),\n  unmountOnClose: PropTypes.bool,\n  returnFocusAfterClose: PropTypes.bool,\n  container: targetPropType\n};\nconst propsToOmit = Object.keys(propTypes);\nconst defaultProps = {\n  isOpen: false,\n  autoFocus: true,\n  centered: false,\n  scrollable: false,\n  role: \"dialog\",\n  backdrop: true,\n  keyboard: true,\n  zIndex: 1220,\n  fade: true,\n  onOpened: noop,\n  onClosed: noop,\n  modalTransition: {\n    timeout: TransitionTimeouts.Modal\n  },\n  backdropTransition: {\n    mountOnEnter: true,\n    timeout: TransitionTimeouts.Fade // uses standard fade transition\n\n  },\n  unmountOnClose: true,\n  returnFocusAfterClose: true,\n  container: \"body\"\n};\n\nclass Modal extends React.Component {\n  constructor(props) {\n    super(props);\n    this._element = null;\n    this._originalBodyPadding = null;\n    this.getFocusableChildren = this.getFocusableChildren.bind(this);\n    this.handleBackdropClick = this.handleBackdropClick.bind(this);\n    this.handleBackdropMouseDown = this.handleBackdropMouseDown.bind(this);\n    this.handleEscape = this.handleEscape.bind(this);\n    this.handleStaticBackdropAnimation = this.handleStaticBackdropAnimation.bind(this);\n    this.handleTab = this.handleTab.bind(this);\n    this.onOpened = this.onOpened.bind(this);\n    this.onClosed = this.onClosed.bind(this);\n    this.manageFocusAfterClose = this.manageFocusAfterClose.bind(this);\n    this.clearBackdropAnimationTimeout = this.clearBackdropAnimationTimeout.bind(this);\n    this.state = {\n      isOpen: false,\n      showStaticBackdropAnimation: false\n    };\n  }\n\n  componentDidMount() {\n    const {\n      isOpen,\n      autoFocus,\n      onEnter\n    } = this.props;\n\n    if (isOpen) {\n      this.init();\n      this.setState({\n        isOpen: true\n      });\n\n      if (autoFocus) {\n        this.setFocus();\n      }\n    }\n\n    if (onEnter) {\n      onEnter();\n    }\n\n    this._isMounted = true;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.isOpen && !prevProps.isOpen) {\n      this.init();\n      this.setState({\n        isOpen: true\n      }); // let render() renders Modal Dialog first\n\n      return;\n    } // now Modal Dialog is rendered and we can refer this._element and this._dialog\n\n\n    if (this.props.autoFocus && this.state.isOpen && !prevState.isOpen) {\n      this.setFocus();\n    }\n\n    if (this._element && prevProps.zIndex !== this.props.zIndex) {\n      this._element.style.zIndex = this.props.zIndex;\n    }\n  }\n\n  componentWillUnmount() {\n    this.clearBackdropAnimationTimeout();\n\n    if (this.props.onExit) {\n      this.props.onExit();\n    }\n\n    if (this._element) {\n      this.destroy();\n\n      if (this.props.isOpen || this.state.isOpen) {\n        this.close();\n      }\n    }\n\n    this._isMounted = false;\n  }\n\n  onOpened(node, isAppearing) {\n    this.props.onOpened()(this.props.modalTransition.onEntered || noop)(node, isAppearing);\n  }\n\n  onClosed(node) {\n    const {\n      unmountOnClose\n    } = this.props; // so all methods get called before it is unmounted\n\n    this.props.onClosed()(this.props.modalTransition.onExited || noop)(node);\n\n    if (unmountOnClose) {\n      this.destroy();\n    }\n\n    this.close();\n\n    if (this._isMounted) {\n      this.setState({\n        isOpen: false\n      });\n    }\n  }\n\n  setFocus() {\n    if (this._dialog && this._dialog.parentNode && typeof this._dialog.parentNode.focus === \"function\") {\n      this._dialog.parentNode.focus();\n    }\n  }\n\n  getFocusableChildren() {\n    return this._element.querySelectorAll(focusableElements.join(\", \"));\n  }\n\n  getFocusedChild() {\n    let currentFocus;\n    const focusableChildren = this.getFocusableChildren();\n\n    try {\n      currentFocus = document.activeElement;\n    } catch (err) {\n      currentFocus = focusableChildren[0];\n    }\n\n    return currentFocus;\n  } // not mouseUp because scrollbar fires it, shouldn't close when user scrolls\n\n\n  handleBackdropClick(e) {\n    if (e.target === this._mouseDownElement) {\n      e.stopPropagation();\n      const backdrop = this._dialog ? this._dialog.parentNode : null;\n\n      if (backdrop && e.target === backdrop && this.props.backdrop === \"static\") {\n        this.handleStaticBackdropAnimation();\n      }\n\n      if (!this.props.isOpen || this.props.backdrop !== true) return;\n\n      if (backdrop && e.target === backdrop && this.props.toggle) {\n        this.props.toggle(e);\n      }\n    }\n  }\n\n  handleTab(e) {\n    if (e.which !== 9) return;\n    const focusableChildren = this.getFocusableChildren();\n    const totalFocusable = focusableChildren.length;\n    if (totalFocusable === 0) return;\n    const currentFocus = this.getFocusedChild();\n    let focusedIndex = 0;\n\n    for (let i = 0; i < totalFocusable; i += 1) {\n      if (focusableChildren[i] === currentFocus) {\n        focusedIndex = i;\n        break;\n      }\n    }\n\n    if (e.shiftKey && focusedIndex === 0) {\n      e.preventDefault();\n      focusableChildren[totalFocusable - 1].focus();\n    } else if (!e.shiftKey && focusedIndex === totalFocusable - 1) {\n      e.preventDefault();\n      focusableChildren[0].focus();\n    }\n  }\n\n  handleBackdropMouseDown(e) {\n    this._mouseDownElement = e.target;\n  }\n\n  handleEscape(e) {\n    if (this.props.isOpen && e.keyCode === keyCodes.esc && this.props.toggle) {\n      if (this.props.keyboard) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.props.toggle(e);\n      } else if (this.props.backdrop === \"static\") {\n        e.preventDefault();\n        e.stopPropagation();\n        this.handleStaticBackdropAnimation();\n      }\n    }\n  }\n\n  handleStaticBackdropAnimation() {\n    this.clearBackdropAnimationTimeout();\n    this.setState({\n      showStaticBackdropAnimation: true\n    });\n    this._backdropAnimationTimeout = setTimeout(() => {\n      this.setState({\n        showStaticBackdropAnimation: false\n      });\n    }, 100);\n  }\n\n  init() {\n    try {\n      this._triggeringElement = document.activeElement;\n    } catch (err) {\n      this._triggeringElement = null;\n    }\n\n    if (!this._element) {\n      this._element = document.createElement(\"div\");\n\n      this._element.setAttribute(\"tabindex\", \"-1\");\n\n      this._element.style.position = \"relative\";\n      this._element.style.zIndex = this.props.zIndex;\n      this._mountContainer = getTarget(this.props.container);\n\n      this._mountContainer.appendChild(this._element);\n    }\n\n    this._originalBodyPadding = getOriginalBodyPadding();\n    conditionallyUpdateScrollbar();\n\n    if (Modal.openCount === 0) {\n      document.body.className = classNames(document.body.className, mapToCssModules(\"modal-open\", this.props.cssModule));\n    }\n\n    Modal.openCount += 1;\n  }\n\n  destroy() {\n    if (this._element) {\n      this._mountContainer.removeChild(this._element);\n\n      this._element = null;\n    }\n\n    this.manageFocusAfterClose();\n  }\n\n  manageFocusAfterClose() {\n    if (this._triggeringElement) {\n      const {\n        returnFocusAfterClose\n      } = this.props;\n      if (this._triggeringElement.focus && returnFocusAfterClose) this._triggeringElement.focus();\n      this._triggeringElement = null;\n    }\n  }\n\n  close() {\n    if (Modal.openCount <= 1) {\n      const modalOpenClassName = mapToCssModules(\"modal-open\", this.props.cssModule); // Use regex to prevent matching `modal-open` as part of a different class, e.g. `my-modal-opened`\n\n      const modalOpenClassNameRegex = new RegExp(`(^| )${modalOpenClassName}( |$)`);\n      document.body.className = document.body.className.replace(modalOpenClassNameRegex, \" \").trim();\n    }\n\n    this.manageFocusAfterClose();\n    Modal.openCount = Math.max(0, Modal.openCount - 1);\n    setScrollbarWidth(this._originalBodyPadding);\n  }\n\n  renderModalDialog() {\n    const attributes = omit(this.props, propsToOmit);\n    const dialogBaseClass = \"modal-dialog\";\n    return __jsx(\"div\", _extends({}, attributes, {\n      className: mapToCssModules(classNames(dialogBaseClass, this.props.className, {\n        [`modal-${this.props.size}`]: this.props.size,\n        [`${dialogBaseClass}-centered`]: this.props.centered,\n        [`${dialogBaseClass}-scrollable`]: this.props.scrollable\n      }), this.props.cssModule),\n      role: \"document\",\n      ref: c => {\n        this._dialog = c;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 7\n      }\n    }), __jsx(\"div\", {\n      className: mapToCssModules(classNames(\"modal-content\", this.props.contentClassName), this.props.cssModule),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }\n    }, this.props.children));\n  }\n\n  render() {\n    const {\n      unmountOnClose\n    } = this.props;\n\n    if (!!this._element && (this.state.isOpen || !unmountOnClose)) {\n      const isModalHidden = !!this._element && !this.state.isOpen && !unmountOnClose;\n      this._element.style.display = isModalHidden ? \"none\" : \"block\";\n      const {\n        wrapClassName,\n        modalClassName,\n        backdropClassName,\n        cssModule,\n        isOpen,\n        backdrop,\n        role,\n        labelledBy,\n        external,\n        innerRef\n      } = this.props;\n      const modalAttributes = {\n        onClick: this.handleBackdropClick,\n        onMouseDown: this.handleBackdropMouseDown,\n        onKeyUp: this.handleEscape,\n        onKeyDown: this.handleTab,\n        style: {\n          display: \"block\"\n        },\n        \"aria-labelledby\": labelledBy,\n        role,\n        tabIndex: \"-1\"\n      };\n      const hasTransition = this.props.fade;\n\n      const modalTransition = _objectSpread(_objectSpread(_objectSpread({}, Fade.defaultProps), this.props.modalTransition), {}, {\n        baseClass: hasTransition ? this.props.modalTransition.baseClass : \"\",\n        timeout: hasTransition ? this.props.modalTransition.timeout : 0\n      });\n\n      const backdropTransition = _objectSpread(_objectSpread(_objectSpread({}, Fade.defaultProps), this.props.backdropTransition), {}, {\n        baseClass: hasTransition ? this.props.backdropTransition.baseClass : \"\",\n        timeout: hasTransition ? this.props.backdropTransition.timeout : 0\n      });\n\n      const Backdrop = backdrop && (hasTransition ? __jsx(Fade, _extends({}, backdropTransition, {\n        in: isOpen && !!backdrop,\n        cssModule: cssModule,\n        className: mapToCssModules(classNames(\"modal-backdrop\", backdropClassName), cssModule),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }\n      })) : __jsx(\"div\", {\n        className: mapToCssModules(classNames(\"modal-backdrop\", \"show\", backdropClassName), cssModule),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }\n      }));\n      return __jsx(Portal, {\n        node: this._element,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: mapToCssModules(wrapClassName),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 11\n        }\n      }, __jsx(Fade, _extends({}, modalAttributes, modalTransition, {\n        in: isOpen,\n        onEntered: this.onOpened,\n        onExited: this.onClosed,\n        cssModule: cssModule,\n        className: mapToCssModules(classNames(\"modal\", modalClassName, this.state.showStaticBackdropAnimation && \"modal-static\"), cssModule),\n        innerRef: innerRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 13\n        }\n      }), external, this.renderModalDialog()), Backdrop));\n    }\n\n    return null;\n  }\n\n  clearBackdropAnimationTimeout() {\n    if (this._backdropAnimationTimeout) {\n      clearTimeout(this._backdropAnimationTimeout);\n      this._backdropAnimationTimeout = undefined;\n    }\n  }\n\n}\n\nModal.propTypes = propTypes;\nModal.defaultProps = defaultProps;\nModal.openCount = 0;\nModal.Body = ModalBody;\nModal.Header = ModalHeader;\nModal.Footer = ModalFooter;\nexport default Modal;","map":{"version":3,"sources":["C:/Users/Eloy/Desktop/sgan/front/src/modules/components/Modal.jsx"],"names":["React","PropTypes","classNames","Fade","Portal","ModalBody","ModalHeader","ModalFooter","getOriginalBodyPadding","conditionallyUpdateScrollbar","setScrollbarWidth","mapToCssModules","omit","focusableElements","TransitionTimeouts","keyCodes","targetPropType","getTarget","noop","FadePropTypes","shape","propTypes","isOpen","bool","autoFocus","centered","scrollable","size","string","toggle","func","keyboard","role","labelledBy","backdrop","oneOfType","oneOf","onEnter","onExit","onOpened","onClosed","children","node","className","wrapClassName","modalClassName","backdropClassName","contentClassName","external","fade","cssModule","object","zIndex","number","backdropTransition","modalTransition","innerRef","unmountOnClose","returnFocusAfterClose","container","propsToOmit","Object","keys","defaultProps","timeout","Modal","mountOnEnter","Component","constructor","props","_element","_originalBodyPadding","getFocusableChildren","bind","handleBackdropClick","handleBackdropMouseDown","handleEscape","handleStaticBackdropAnimation","handleTab","manageFocusAfterClose","clearBackdropAnimationTimeout","state","showStaticBackdropAnimation","componentDidMount","init","setState","setFocus","_isMounted","componentDidUpdate","prevProps","prevState","style","componentWillUnmount","destroy","close","isAppearing","onEntered","onExited","_dialog","parentNode","focus","querySelectorAll","join","getFocusedChild","currentFocus","focusableChildren","document","activeElement","err","e","target","_mouseDownElement","stopPropagation","which","totalFocusable","length","focusedIndex","i","shiftKey","preventDefault","keyCode","esc","_backdropAnimationTimeout","setTimeout","_triggeringElement","createElement","setAttribute","position","_mountContainer","appendChild","openCount","body","removeChild","modalOpenClassName","modalOpenClassNameRegex","RegExp","replace","trim","Math","max","renderModalDialog","attributes","dialogBaseClass","c","render","isModalHidden","display","modalAttributes","onClick","onMouseDown","onKeyUp","onKeyDown","tabIndex","hasTransition","baseClass","Backdrop","clearTimeout","undefined","Body","Header","Footer"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport classNames from \"classnames\"\nimport Fade from \"./Fade\"\nimport Portal from \"./Portal\"\nimport ModalBody from \"./ModalBody\"\nimport ModalHeader from \"./ModalHeader\"\nimport ModalFooter from \"./ModalFooter\"\n\nimport {\n  getOriginalBodyPadding,\n  conditionallyUpdateScrollbar,\n  setScrollbarWidth,\n  mapToCssModules,\n  omit,\n  focusableElements,\n  TransitionTimeouts,\n  keyCodes,\n  targetPropType,\n  getTarget\n} from \"./utils\"\n\nfunction noop() {}\n\nconst FadePropTypes = PropTypes.shape(Fade.propTypes)\n\nconst propTypes = {\n  isOpen: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  centered: PropTypes.bool,\n  scrollable: PropTypes.bool,\n  size: PropTypes.string,\n  toggle: PropTypes.func,\n  keyboard: PropTypes.bool,\n  role: PropTypes.string,\n  labelledBy: PropTypes.string,\n  backdrop: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf([\"static\"])]),\n  onEnter: PropTypes.func,\n  onExit: PropTypes.func,\n  onOpened: PropTypes.func,\n  onClosed: PropTypes.func,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  wrapClassName: PropTypes.string,\n  modalClassName: PropTypes.string,\n  backdropClassName: PropTypes.string,\n  contentClassName: PropTypes.string,\n  external: PropTypes.node,\n  fade: PropTypes.bool,\n  cssModule: PropTypes.object,\n  zIndex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  backdropTransition: FadePropTypes,\n  modalTransition: FadePropTypes,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func]),\n  unmountOnClose: PropTypes.bool,\n  returnFocusAfterClose: PropTypes.bool,\n  container: targetPropType\n}\n\nconst propsToOmit = Object.keys(propTypes)\n\nconst defaultProps = {\n  isOpen: false,\n  autoFocus: true,\n  centered: false,\n  scrollable: false,\n  role: \"dialog\",\n  backdrop: true,\n  keyboard: true,\n  zIndex: 1220,\n  fade: true,\n  onOpened: noop,\n  onClosed: noop,\n  modalTransition: {\n    timeout: TransitionTimeouts.Modal\n  },\n  backdropTransition: {\n    mountOnEnter: true,\n    timeout: TransitionTimeouts.Fade // uses standard fade transition\n  },\n  unmountOnClose: true,\n  returnFocusAfterClose: true,\n  container: \"body\"\n}\n\nclass Modal extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this._element = null\n    this._originalBodyPadding = null\n    this.getFocusableChildren = this.getFocusableChildren.bind(this)\n    this.handleBackdropClick = this.handleBackdropClick.bind(this)\n    this.handleBackdropMouseDown = this.handleBackdropMouseDown.bind(this)\n    this.handleEscape = this.handleEscape.bind(this)\n    this.handleStaticBackdropAnimation = this.handleStaticBackdropAnimation.bind(this)\n    this.handleTab = this.handleTab.bind(this)\n    this.onOpened = this.onOpened.bind(this)\n    this.onClosed = this.onClosed.bind(this)\n    this.manageFocusAfterClose = this.manageFocusAfterClose.bind(this)\n    this.clearBackdropAnimationTimeout = this.clearBackdropAnimationTimeout.bind(this)\n\n    this.state = {\n      isOpen: false,\n      showStaticBackdropAnimation: false\n    }\n  }\n\n  componentDidMount() {\n    const { isOpen, autoFocus, onEnter } = this.props\n\n    if (isOpen) {\n      this.init()\n      this.setState({ isOpen: true })\n      if (autoFocus) {\n        this.setFocus()\n      }\n    }\n\n    if (onEnter) {\n      onEnter()\n    }\n\n    this._isMounted = true\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.isOpen && !prevProps.isOpen) {\n      this.init()\n      this.setState({ isOpen: true })\n      // let render() renders Modal Dialog first\n      return\n    }\n\n    // now Modal Dialog is rendered and we can refer this._element and this._dialog\n    if (this.props.autoFocus && this.state.isOpen && !prevState.isOpen) {\n      this.setFocus()\n    }\n\n    if (this._element && prevProps.zIndex !== this.props.zIndex) {\n      this._element.style.zIndex = this.props.zIndex\n    }\n  }\n\n  componentWillUnmount() {\n    this.clearBackdropAnimationTimeout()\n\n    if (this.props.onExit) {\n      this.props.onExit()\n    }\n\n    if (this._element) {\n      this.destroy()\n      if (this.props.isOpen || this.state.isOpen) {\n        this.close()\n      }\n    }\n\n    this._isMounted = false\n  }\n\n  onOpened(node, isAppearing) {\n    this.props.onOpened()\n    (this.props.modalTransition.onEntered || noop)(node, isAppearing)\n  }\n\n  onClosed(node) {\n    const { unmountOnClose } = this.props\n    // so all methods get called before it is unmounted\n    this.props.onClosed()\n    (this.props.modalTransition.onExited || noop)(node)\n\n    if (unmountOnClose) {\n      this.destroy()\n    }\n    this.close()\n\n    if (this._isMounted) {\n      this.setState({ isOpen: false })\n    }\n  }\n\n  setFocus() {\n    if (\n      this._dialog &&\n      this._dialog.parentNode &&\n      typeof this._dialog.parentNode.focus === \"function\"\n    ) {\n      this._dialog.parentNode.focus()\n    }\n  }\n\n  getFocusableChildren() {\n    return this._element.querySelectorAll(focusableElements.join(\", \"))\n  }\n\n  getFocusedChild() {\n    let currentFocus\n    const focusableChildren = this.getFocusableChildren()\n\n    try {\n      currentFocus = document.activeElement\n    } catch (err) {\n      currentFocus = focusableChildren[0]\n    }\n    return currentFocus\n  }\n\n  // not mouseUp because scrollbar fires it, shouldn't close when user scrolls\n  handleBackdropClick(e) {\n    if (e.target === this._mouseDownElement) {\n      e.stopPropagation()\n\n      const backdrop = this._dialog ? this._dialog.parentNode : null\n\n      if (backdrop && e.target === backdrop && this.props.backdrop === \"static\") {\n        this.handleStaticBackdropAnimation()\n      }\n\n      if (!this.props.isOpen || this.props.backdrop !== true) return\n\n      if (backdrop && e.target === backdrop && this.props.toggle) {\n        this.props.toggle(e)\n      }\n    }\n  }\n\n  handleTab(e) {\n    if (e.which !== 9) return\n\n    const focusableChildren = this.getFocusableChildren()\n    const totalFocusable = focusableChildren.length\n    if (totalFocusable === 0) return\n    const currentFocus = this.getFocusedChild()\n\n    let focusedIndex = 0\n\n    for (let i = 0; i < totalFocusable; i += 1) {\n      if (focusableChildren[i] === currentFocus) {\n        focusedIndex = i\n        break\n      }\n    }\n\n    if (e.shiftKey && focusedIndex === 0) {\n      e.preventDefault()\n      focusableChildren[totalFocusable - 1].focus()\n    } else if (!e.shiftKey && focusedIndex === totalFocusable - 1) {\n      e.preventDefault()\n      focusableChildren[0].focus()\n    }\n  }\n\n  handleBackdropMouseDown(e) {\n    this._mouseDownElement = e.target\n  }\n\n  handleEscape(e) {\n    if (this.props.isOpen && e.keyCode === keyCodes.esc && this.props.toggle) {\n      if (this.props.keyboard) {\n        e.preventDefault()\n        e.stopPropagation()\n\n        this.props.toggle(e)\n      } else if (this.props.backdrop === \"static\") {\n        e.preventDefault()\n        e.stopPropagation()\n\n        this.handleStaticBackdropAnimation()\n      }\n    }\n  }\n\n  handleStaticBackdropAnimation() {\n    this.clearBackdropAnimationTimeout()\n    this.setState({ showStaticBackdropAnimation: true })\n    this._backdropAnimationTimeout = setTimeout(() => {\n      this.setState({ showStaticBackdropAnimation: false })\n    }, 100)\n  }\n\n  init() {\n    try {\n      this._triggeringElement = document.activeElement\n    } catch (err) {\n      this._triggeringElement = null\n    }\n\n    if (!this._element) {\n      this._element = document.createElement(\"div\")\n      this._element.setAttribute(\"tabindex\", \"-1\")\n      this._element.style.position = \"relative\"\n      this._element.style.zIndex = this.props.zIndex\n      this._mountContainer = getTarget(this.props.container)\n      this._mountContainer.appendChild(this._element)\n    }\n\n    this._originalBodyPadding = getOriginalBodyPadding()\n    conditionallyUpdateScrollbar()\n\n    if (Modal.openCount === 0) {\n      document.body.className = classNames(\n        document.body.className,\n        mapToCssModules(\"modal-open\", this.props.cssModule)\n      )\n    }\n\n    Modal.openCount += 1\n  }\n\n  destroy() {\n    if (this._element) {\n      this._mountContainer.removeChild(this._element)\n      this._element = null\n    }\n\n    this.manageFocusAfterClose()\n  }\n\n  manageFocusAfterClose() {\n    if (this._triggeringElement) {\n      const { returnFocusAfterClose } = this.props\n      if (this._triggeringElement.focus && returnFocusAfterClose) this._triggeringElement.focus()\n      this._triggeringElement = null\n    }\n  }\n\n  close() {\n    if (Modal.openCount <= 1) {\n      const modalOpenClassName = mapToCssModules(\"modal-open\", this.props.cssModule)\n      // Use regex to prevent matching `modal-open` as part of a different class, e.g. `my-modal-opened`\n      const modalOpenClassNameRegex = new RegExp(`(^| )${modalOpenClassName}( |$)`)\n      document.body.className = document.body.className.replace(modalOpenClassNameRegex, \" \").trim()\n    }\n    this.manageFocusAfterClose()\n    Modal.openCount = Math.max(0, Modal.openCount - 1)\n\n    setScrollbarWidth(this._originalBodyPadding)\n  }\n\n  renderModalDialog() {\n    const attributes = omit(this.props, propsToOmit)\n    const dialogBaseClass = \"modal-dialog\"\n\n    return (\n      <div\n        {...attributes}\n        className={mapToCssModules(\n          classNames(dialogBaseClass, this.props.className, {\n            [`modal-${this.props.size}`]: this.props.size,\n            [`${dialogBaseClass}-centered`]: this.props.centered,\n            [`${dialogBaseClass}-scrollable`]: this.props.scrollable\n          }),\n          this.props.cssModule\n        )}\n        role=\"document\"\n        ref={c => {\n          this._dialog = c\n        }}\n      >\n        <div\n          className={mapToCssModules(\n            classNames(\"modal-content\", this.props.contentClassName),\n            this.props.cssModule\n          )}\n        >\n          {this.props.children}\n        </div>\n      </div>\n    )\n  }\n\n  render() {\n    const { unmountOnClose } = this.props\n\n    if (!!this._element && (this.state.isOpen || !unmountOnClose)) {\n      const isModalHidden = !!this._element && !this.state.isOpen && !unmountOnClose\n      this._element.style.display = isModalHidden ? \"none\" : \"block\"\n\n      const {\n        wrapClassName,\n        modalClassName,\n        backdropClassName,\n        cssModule,\n        isOpen,\n        backdrop,\n        role,\n        labelledBy,\n        external,\n        innerRef\n      } = this.props\n\n      const modalAttributes = {\n        onClick: this.handleBackdropClick,\n        onMouseDown: this.handleBackdropMouseDown,\n        onKeyUp: this.handleEscape,\n        onKeyDown: this.handleTab,\n        style: { display: \"block\" },\n        \"aria-labelledby\": labelledBy,\n        role,\n        tabIndex: \"-1\"\n      }\n\n      const hasTransition = this.props.fade\n      const modalTransition = {\n        ...Fade.defaultProps,\n        ...this.props.modalTransition,\n        baseClass: hasTransition ? this.props.modalTransition.baseClass : \"\",\n        timeout: hasTransition ? this.props.modalTransition.timeout : 0\n      }\n      const backdropTransition = {\n        ...Fade.defaultProps,\n        ...this.props.backdropTransition,\n        baseClass: hasTransition ? this.props.backdropTransition.baseClass : \"\",\n        timeout: hasTransition ? this.props.backdropTransition.timeout : 0\n      }\n\n      const Backdrop =\n        backdrop &&\n        (hasTransition ? (\n          <Fade\n            {...backdropTransition}\n            in={isOpen && !!backdrop}\n            cssModule={cssModule}\n            className={mapToCssModules(classNames(\"modal-backdrop\", backdropClassName), cssModule)}\n          />\n        ) : (\n          <div\n            className={mapToCssModules(\n              classNames(\"modal-backdrop\", \"show\", backdropClassName),\n              cssModule\n            )}\n          />\n        ))\n\n      return (\n        <Portal node={this._element}>\n          <div className={mapToCssModules(wrapClassName)}>\n            <Fade\n              {...modalAttributes}\n              {...modalTransition}\n              in={isOpen}\n              onEntered={this.onOpened}\n              onExited={this.onClosed}\n              cssModule={cssModule}\n              className={mapToCssModules(\n                classNames(\n                  \"modal\",\n                  modalClassName,\n                  this.state.showStaticBackdropAnimation && \"modal-static\"\n                ),\n                cssModule\n              )}\n              innerRef={innerRef}\n            >\n              {external}\n              {this.renderModalDialog()}\n            </Fade>\n            {Backdrop}\n          </div>\n        </Portal>\n      )\n    }\n    return null\n  }\n\n  clearBackdropAnimationTimeout() {\n    if (this._backdropAnimationTimeout) {\n      clearTimeout(this._backdropAnimationTimeout)\n      this._backdropAnimationTimeout = undefined\n    }\n  }\n}\n\nModal.propTypes = propTypes\nModal.defaultProps = defaultProps\nModal.openCount = 0\n\nModal.Body = ModalBody\nModal.Header = ModalHeader\nModal.Footer = ModalFooter\n\nexport default Modal\n"]},"metadata":{},"sourceType":"module"}