{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Eloy\\\\Desktop\\\\template\\\\src\\\\modules\\\\components\\\\Modal.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport Fade from \"./Fade\";\nimport Portal from \"./Portal\";\nimport ModalBody from \"./ModalBody\";\nimport ModalHeader from \"./ModalHeader\";\nimport ModalFooter from \"./ModalFooter\";\nimport { getOriginalBodyPadding, conditionallyUpdateScrollbar, setScrollbarWidth, mapToCssModules, omit, focusableElements, TransitionTimeouts, keyCodes, targetPropType, getTarget } from \"./utils\";\n\nfunction noop() {}\n\nvar FadePropTypes = PropTypes.shape(Fade.propTypes);\nvar propTypes = {\n  isOpen: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  centered: PropTypes.bool,\n  scrollable: PropTypes.bool,\n  size: PropTypes.string,\n  toggle: PropTypes.func,\n  keyboard: PropTypes.bool,\n  role: PropTypes.string,\n  labelledBy: PropTypes.string,\n  backdrop: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf([\"static\"])]),\n  onEnter: PropTypes.func,\n  onExit: PropTypes.func,\n  onOpened: PropTypes.func,\n  onClosed: PropTypes.func,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  wrapClassName: PropTypes.string,\n  modalClassName: PropTypes.string,\n  backdropClassName: PropTypes.string,\n  contentClassName: PropTypes.string,\n  external: PropTypes.node,\n  fade: PropTypes.bool,\n  cssModule: PropTypes.object,\n  zIndex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  backdropTransition: FadePropTypes,\n  modalTransition: FadePropTypes,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func]),\n  unmountOnClose: PropTypes.bool,\n  returnFocusAfterClose: PropTypes.bool,\n  container: targetPropType\n};\nvar propsToOmit = Object.keys(propTypes);\nvar defaultProps = {\n  isOpen: false,\n  autoFocus: true,\n  centered: false,\n  scrollable: false,\n  role: \"dialog\",\n  backdrop: true,\n  keyboard: true,\n  zIndex: 1220,\n  fade: true,\n  onOpened: noop,\n  onClosed: noop,\n  modalTransition: {\n    timeout: TransitionTimeouts.Modal\n  },\n  backdropTransition: {\n    mountOnEnter: true,\n    timeout: TransitionTimeouts.Fade // uses standard fade transition\n\n  },\n  unmountOnClose: true,\n  returnFocusAfterClose: true,\n  container: \"body\"\n};\n\nvar Modal = /*#__PURE__*/function (_React$Component) {\n  _inherits(Modal, _React$Component);\n\n  var _super = _createSuper(Modal);\n\n  function Modal(props) {\n    var _this;\n\n    _classCallCheck(this, Modal);\n\n    _this = _super.call(this, props);\n    _this._element = null;\n    _this._originalBodyPadding = null;\n    _this.getFocusableChildren = _this.getFocusableChildren.bind(_assertThisInitialized(_this));\n    _this.handleBackdropClick = _this.handleBackdropClick.bind(_assertThisInitialized(_this));\n    _this.handleBackdropMouseDown = _this.handleBackdropMouseDown.bind(_assertThisInitialized(_this));\n    _this.handleEscape = _this.handleEscape.bind(_assertThisInitialized(_this));\n    _this.handleStaticBackdropAnimation = _this.handleStaticBackdropAnimation.bind(_assertThisInitialized(_this));\n    _this.handleTab = _this.handleTab.bind(_assertThisInitialized(_this));\n    _this.onOpened = _this.onOpened.bind(_assertThisInitialized(_this));\n    _this.onClosed = _this.onClosed.bind(_assertThisInitialized(_this));\n    _this.manageFocusAfterClose = _this.manageFocusAfterClose.bind(_assertThisInitialized(_this));\n    _this.clearBackdropAnimationTimeout = _this.clearBackdropAnimationTimeout.bind(_assertThisInitialized(_this));\n    _this.state = {\n      isOpen: false,\n      showStaticBackdropAnimation: false\n    };\n    return _this;\n  }\n\n  _createClass(Modal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          isOpen = _this$props.isOpen,\n          autoFocus = _this$props.autoFocus,\n          onEnter = _this$props.onEnter;\n\n      if (isOpen) {\n        this.init();\n        this.setState({\n          isOpen: true\n        });\n\n        if (autoFocus) {\n          this.setFocus();\n        }\n      }\n\n      if (onEnter) {\n        onEnter();\n      }\n\n      this._isMounted = true;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.isOpen && !prevProps.isOpen) {\n        this.init();\n        this.setState({\n          isOpen: true\n        }); // let render() renders Modal Dialog first\n\n        return;\n      } // now Modal Dialog is rendered and we can refer this._element and this._dialog\n\n\n      if (this.props.autoFocus && this.state.isOpen && !prevState.isOpen) {\n        this.setFocus();\n      }\n\n      if (this._element && prevProps.zIndex !== this.props.zIndex) {\n        this._element.style.zIndex = this.props.zIndex;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clearBackdropAnimationTimeout();\n\n      if (this.props.onExit) {\n        this.props.onExit();\n      }\n\n      if (this._element) {\n        this.destroy();\n\n        if (this.props.isOpen || this.state.isOpen) {\n          this.close();\n        }\n      }\n\n      this._isMounted = false;\n    }\n  }, {\n    key: \"onOpened\",\n    value: function onOpened(node, isAppearing) {\n      this.props.onOpened()(this.props.modalTransition.onEntered || noop)(node, isAppearing);\n    }\n  }, {\n    key: \"onClosed\",\n    value: function onClosed(node) {\n      var unmountOnClose = this.props.unmountOnClose; // so all methods get called before it is unmounted\n\n      this.props.onClosed()(this.props.modalTransition.onExited || noop)(node);\n\n      if (unmountOnClose) {\n        this.destroy();\n      }\n\n      this.close();\n\n      if (this._isMounted) {\n        this.setState({\n          isOpen: false\n        });\n      }\n    }\n  }, {\n    key: \"setFocus\",\n    value: function setFocus() {\n      if (this._dialog && this._dialog.parentNode && typeof this._dialog.parentNode.focus === \"function\") {\n        this._dialog.parentNode.focus();\n      }\n    }\n  }, {\n    key: \"getFocusableChildren\",\n    value: function getFocusableChildren() {\n      return this._element.querySelectorAll(focusableElements.join(\", \"));\n    }\n  }, {\n    key: \"getFocusedChild\",\n    value: function getFocusedChild() {\n      var currentFocus;\n      var focusableChildren = this.getFocusableChildren();\n\n      try {\n        currentFocus = document.activeElement;\n      } catch (err) {\n        currentFocus = focusableChildren[0];\n      }\n\n      return currentFocus;\n    } // not mouseUp because scrollbar fires it, shouldn't close when user scrolls\n\n  }, {\n    key: \"handleBackdropClick\",\n    value: function handleBackdropClick(e) {\n      if (e.target === this._mouseDownElement) {\n        e.stopPropagation();\n        var backdrop = this._dialog ? this._dialog.parentNode : null;\n\n        if (backdrop && e.target === backdrop && this.props.backdrop === \"static\") {\n          this.handleStaticBackdropAnimation();\n        }\n\n        if (!this.props.isOpen || this.props.backdrop !== true) return;\n\n        if (backdrop && e.target === backdrop && this.props.toggle) {\n          this.props.toggle(e);\n        }\n      }\n    }\n  }, {\n    key: \"handleTab\",\n    value: function handleTab(e) {\n      if (e.which !== 9) return;\n      var focusableChildren = this.getFocusableChildren();\n      var totalFocusable = focusableChildren.length;\n      if (totalFocusable === 0) return;\n      var currentFocus = this.getFocusedChild();\n      var focusedIndex = 0;\n\n      for (var i = 0; i < totalFocusable; i += 1) {\n        if (focusableChildren[i] === currentFocus) {\n          focusedIndex = i;\n          break;\n        }\n      }\n\n      if (e.shiftKey && focusedIndex === 0) {\n        e.preventDefault();\n        focusableChildren[totalFocusable - 1].focus();\n      } else if (!e.shiftKey && focusedIndex === totalFocusable - 1) {\n        e.preventDefault();\n        focusableChildren[0].focus();\n      }\n    }\n  }, {\n    key: \"handleBackdropMouseDown\",\n    value: function handleBackdropMouseDown(e) {\n      this._mouseDownElement = e.target;\n    }\n  }, {\n    key: \"handleEscape\",\n    value: function handleEscape(e) {\n      if (this.props.isOpen && e.keyCode === keyCodes.esc && this.props.toggle) {\n        if (this.props.keyboard) {\n          e.preventDefault();\n          e.stopPropagation();\n          this.props.toggle(e);\n        } else if (this.props.backdrop === \"static\") {\n          e.preventDefault();\n          e.stopPropagation();\n          this.handleStaticBackdropAnimation();\n        }\n      }\n    }\n  }, {\n    key: \"handleStaticBackdropAnimation\",\n    value: function handleStaticBackdropAnimation() {\n      var _this2 = this;\n\n      this.clearBackdropAnimationTimeout();\n      this.setState({\n        showStaticBackdropAnimation: true\n      });\n      this._backdropAnimationTimeout = setTimeout(function () {\n        _this2.setState({\n          showStaticBackdropAnimation: false\n        });\n      }, 100);\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      try {\n        this._triggeringElement = document.activeElement;\n      } catch (err) {\n        this._triggeringElement = null;\n      }\n\n      if (!this._element) {\n        this._element = document.createElement(\"div\");\n\n        this._element.setAttribute(\"tabindex\", \"-1\");\n\n        this._element.style.position = \"relative\";\n        this._element.style.zIndex = this.props.zIndex;\n        this._mountContainer = getTarget(this.props.container);\n\n        this._mountContainer.appendChild(this._element);\n      }\n\n      this._originalBodyPadding = getOriginalBodyPadding();\n      conditionallyUpdateScrollbar();\n\n      if (Modal.openCount === 0) {\n        document.body.className = classNames(document.body.className, mapToCssModules(\"modal-open\", this.props.cssModule));\n      }\n\n      Modal.openCount += 1;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this._element) {\n        this._mountContainer.removeChild(this._element);\n\n        this._element = null;\n      }\n\n      this.manageFocusAfterClose();\n    }\n  }, {\n    key: \"manageFocusAfterClose\",\n    value: function manageFocusAfterClose() {\n      if (this._triggeringElement) {\n        var returnFocusAfterClose = this.props.returnFocusAfterClose;\n        if (this._triggeringElement.focus && returnFocusAfterClose) this._triggeringElement.focus();\n        this._triggeringElement = null;\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (Modal.openCount <= 1) {\n        var modalOpenClassName = mapToCssModules(\"modal-open\", this.props.cssModule); // Use regex to prevent matching `modal-open` as part of a different class, e.g. `my-modal-opened`\n\n        var modalOpenClassNameRegex = new RegExp(\"(^| )\".concat(modalOpenClassName, \"( |$)\"));\n        document.body.className = document.body.className.replace(modalOpenClassNameRegex, \" \").trim();\n      }\n\n      this.manageFocusAfterClose();\n      Modal.openCount = Math.max(0, Modal.openCount - 1);\n      setScrollbarWidth(this._originalBodyPadding);\n    }\n  }, {\n    key: \"renderModalDialog\",\n    value: function renderModalDialog() {\n      var _classNames,\n          _this3 = this;\n\n      var attributes = omit(this.props, propsToOmit);\n      var dialogBaseClass = \"modal-dialog\";\n      return __jsx(\"div\", _extends({}, attributes, {\n        className: mapToCssModules(classNames(dialogBaseClass, this.props.className, (_classNames = {}, _defineProperty(_classNames, \"modal-\".concat(this.props.size), this.props.size), _defineProperty(_classNames, \"\".concat(dialogBaseClass, \"-centered\"), this.props.centered), _defineProperty(_classNames, \"\".concat(dialogBaseClass, \"-scrollable\"), this.props.scrollable), _classNames)), this.props.cssModule),\n        role: \"document\",\n        ref: function ref(c) {\n          _this3._dialog = c;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 7\n        }\n      }), __jsx(\"div\", {\n        className: mapToCssModules(classNames(\"modal-content\", this.props.contentClassName), this.props.cssModule),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 9\n        }\n      }, this.props.children));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var unmountOnClose = this.props.unmountOnClose;\n\n      if (!!this._element && (this.state.isOpen || !unmountOnClose)) {\n        var isModalHidden = !!this._element && !this.state.isOpen && !unmountOnClose;\n        this._element.style.display = isModalHidden ? \"none\" : \"block\";\n        var _this$props2 = this.props,\n            wrapClassName = _this$props2.wrapClassName,\n            modalClassName = _this$props2.modalClassName,\n            backdropClassName = _this$props2.backdropClassName,\n            cssModule = _this$props2.cssModule,\n            isOpen = _this$props2.isOpen,\n            backdrop = _this$props2.backdrop,\n            role = _this$props2.role,\n            labelledBy = _this$props2.labelledBy,\n            external = _this$props2.external,\n            innerRef = _this$props2.innerRef;\n        var modalAttributes = {\n          onClick: this.handleBackdropClick,\n          onMouseDown: this.handleBackdropMouseDown,\n          onKeyUp: this.handleEscape,\n          onKeyDown: this.handleTab,\n          style: {\n            display: \"block\"\n          },\n          \"aria-labelledby\": labelledBy,\n          role: role,\n          tabIndex: \"-1\"\n        };\n        var hasTransition = this.props.fade;\n\n        var modalTransition = _objectSpread(_objectSpread(_objectSpread({}, Fade.defaultProps), this.props.modalTransition), {}, {\n          baseClass: hasTransition ? this.props.modalTransition.baseClass : \"\",\n          timeout: hasTransition ? this.props.modalTransition.timeout : 0\n        });\n\n        var backdropTransition = _objectSpread(_objectSpread(_objectSpread({}, Fade.defaultProps), this.props.backdropTransition), {}, {\n          baseClass: hasTransition ? this.props.backdropTransition.baseClass : \"\",\n          timeout: hasTransition ? this.props.backdropTransition.timeout : 0\n        });\n\n        var Backdrop = backdrop && (hasTransition ? __jsx(Fade, _extends({}, backdropTransition, {\n          \"in\": isOpen && !!backdrop,\n          cssModule: cssModule,\n          className: mapToCssModules(classNames(\"modal-backdrop\", backdropClassName), cssModule),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 11\n          }\n        })) : __jsx(\"div\", {\n          className: mapToCssModules(classNames(\"modal-backdrop\", \"show\", backdropClassName), cssModule),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 11\n          }\n        }));\n        return __jsx(Portal, {\n          node: this._element,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 9\n          }\n        }, __jsx(\"div\", {\n          className: mapToCssModules(wrapClassName),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 11\n          }\n        }, __jsx(Fade, _extends({}, modalAttributes, modalTransition, {\n          \"in\": isOpen,\n          onEntered: this.onOpened,\n          onExited: this.onClosed,\n          cssModule: cssModule,\n          className: mapToCssModules(classNames(\"modal\", modalClassName, this.state.showStaticBackdropAnimation && \"modal-static\"), cssModule),\n          innerRef: innerRef,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 13\n          }\n        }), external, this.renderModalDialog()), Backdrop));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"clearBackdropAnimationTimeout\",\n    value: function clearBackdropAnimationTimeout() {\n      if (this._backdropAnimationTimeout) {\n        clearTimeout(this._backdropAnimationTimeout);\n        this._backdropAnimationTimeout = undefined;\n      }\n    }\n  }]);\n\n  return Modal;\n}(React.Component);\n\nModal.propTypes = propTypes;\nModal.defaultProps = defaultProps;\nModal.openCount = 0;\nModal.Body = ModalBody;\nModal.Header = ModalHeader;\nModal.Footer = ModalFooter;\nexport default Modal;","map":{"version":3,"sources":["C:/Users/Eloy/Desktop/template/src/modules/components/Modal.jsx"],"names":["React","PropTypes","classNames","Fade","Portal","ModalBody","ModalHeader","ModalFooter","getOriginalBodyPadding","conditionallyUpdateScrollbar","setScrollbarWidth","mapToCssModules","omit","focusableElements","TransitionTimeouts","keyCodes","targetPropType","getTarget","noop","FadePropTypes","shape","propTypes","isOpen","bool","autoFocus","centered","scrollable","size","string","toggle","func","keyboard","role","labelledBy","backdrop","oneOfType","oneOf","onEnter","onExit","onOpened","onClosed","children","node","className","wrapClassName","modalClassName","backdropClassName","contentClassName","external","fade","cssModule","object","zIndex","number","backdropTransition","modalTransition","innerRef","unmountOnClose","returnFocusAfterClose","container","propsToOmit","Object","keys","defaultProps","timeout","Modal","mountOnEnter","props","_element","_originalBodyPadding","getFocusableChildren","bind","handleBackdropClick","handleBackdropMouseDown","handleEscape","handleStaticBackdropAnimation","handleTab","manageFocusAfterClose","clearBackdropAnimationTimeout","state","showStaticBackdropAnimation","init","setState","setFocus","_isMounted","prevProps","prevState","style","destroy","close","isAppearing","onEntered","onExited","_dialog","parentNode","focus","querySelectorAll","join","currentFocus","focusableChildren","document","activeElement","err","e","target","_mouseDownElement","stopPropagation","which","totalFocusable","length","getFocusedChild","focusedIndex","i","shiftKey","preventDefault","keyCode","esc","_backdropAnimationTimeout","setTimeout","_triggeringElement","createElement","setAttribute","position","_mountContainer","appendChild","openCount","body","removeChild","modalOpenClassName","modalOpenClassNameRegex","RegExp","replace","trim","Math","max","attributes","dialogBaseClass","c","isModalHidden","display","modalAttributes","onClick","onMouseDown","onKeyUp","onKeyDown","tabIndex","hasTransition","baseClass","Backdrop","renderModalDialog","clearTimeout","undefined","Component","Body","Header","Footer"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport classNames from \"classnames\"\nimport Fade from \"./Fade\"\nimport Portal from \"./Portal\"\nimport ModalBody from \"./ModalBody\"\nimport ModalHeader from \"./ModalHeader\"\nimport ModalFooter from \"./ModalFooter\"\n\nimport {\n  getOriginalBodyPadding,\n  conditionallyUpdateScrollbar,\n  setScrollbarWidth,\n  mapToCssModules,\n  omit,\n  focusableElements,\n  TransitionTimeouts,\n  keyCodes,\n  targetPropType,\n  getTarget\n} from \"./utils\"\n\nfunction noop() {}\n\nconst FadePropTypes = PropTypes.shape(Fade.propTypes)\n\nconst propTypes = {\n  isOpen: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  centered: PropTypes.bool,\n  scrollable: PropTypes.bool,\n  size: PropTypes.string,\n  toggle: PropTypes.func,\n  keyboard: PropTypes.bool,\n  role: PropTypes.string,\n  labelledBy: PropTypes.string,\n  backdrop: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf([\"static\"])]),\n  onEnter: PropTypes.func,\n  onExit: PropTypes.func,\n  onOpened: PropTypes.func,\n  onClosed: PropTypes.func,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  wrapClassName: PropTypes.string,\n  modalClassName: PropTypes.string,\n  backdropClassName: PropTypes.string,\n  contentClassName: PropTypes.string,\n  external: PropTypes.node,\n  fade: PropTypes.bool,\n  cssModule: PropTypes.object,\n  zIndex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  backdropTransition: FadePropTypes,\n  modalTransition: FadePropTypes,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func]),\n  unmountOnClose: PropTypes.bool,\n  returnFocusAfterClose: PropTypes.bool,\n  container: targetPropType\n}\n\nconst propsToOmit = Object.keys(propTypes)\n\nconst defaultProps = {\n  isOpen: false,\n  autoFocus: true,\n  centered: false,\n  scrollable: false,\n  role: \"dialog\",\n  backdrop: true,\n  keyboard: true,\n  zIndex: 1220,\n  fade: true,\n  onOpened: noop,\n  onClosed: noop,\n  modalTransition: {\n    timeout: TransitionTimeouts.Modal\n  },\n  backdropTransition: {\n    mountOnEnter: true,\n    timeout: TransitionTimeouts.Fade // uses standard fade transition\n  },\n  unmountOnClose: true,\n  returnFocusAfterClose: true,\n  container: \"body\"\n}\n\nclass Modal extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this._element = null\n    this._originalBodyPadding = null\n    this.getFocusableChildren = this.getFocusableChildren.bind(this)\n    this.handleBackdropClick = this.handleBackdropClick.bind(this)\n    this.handleBackdropMouseDown = this.handleBackdropMouseDown.bind(this)\n    this.handleEscape = this.handleEscape.bind(this)\n    this.handleStaticBackdropAnimation = this.handleStaticBackdropAnimation.bind(this)\n    this.handleTab = this.handleTab.bind(this)\n    this.onOpened = this.onOpened.bind(this)\n    this.onClosed = this.onClosed.bind(this)\n    this.manageFocusAfterClose = this.manageFocusAfterClose.bind(this)\n    this.clearBackdropAnimationTimeout = this.clearBackdropAnimationTimeout.bind(this)\n\n    this.state = {\n      isOpen: false,\n      showStaticBackdropAnimation: false\n    }\n  }\n\n  componentDidMount() {\n    const { isOpen, autoFocus, onEnter } = this.props\n\n    if (isOpen) {\n      this.init()\n      this.setState({ isOpen: true })\n      if (autoFocus) {\n        this.setFocus()\n      }\n    }\n\n    if (onEnter) {\n      onEnter()\n    }\n\n    this._isMounted = true\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.isOpen && !prevProps.isOpen) {\n      this.init()\n      this.setState({ isOpen: true })\n      // let render() renders Modal Dialog first\n      return\n    }\n\n    // now Modal Dialog is rendered and we can refer this._element and this._dialog\n    if (this.props.autoFocus && this.state.isOpen && !prevState.isOpen) {\n      this.setFocus()\n    }\n\n    if (this._element && prevProps.zIndex !== this.props.zIndex) {\n      this._element.style.zIndex = this.props.zIndex\n    }\n  }\n\n  componentWillUnmount() {\n    this.clearBackdropAnimationTimeout()\n\n    if (this.props.onExit) {\n      this.props.onExit()\n    }\n\n    if (this._element) {\n      this.destroy()\n      if (this.props.isOpen || this.state.isOpen) {\n        this.close()\n      }\n    }\n\n    this._isMounted = false\n  }\n\n  onOpened(node, isAppearing) {\n    this.props.onOpened()\n    (this.props.modalTransition.onEntered || noop)(node, isAppearing)\n  }\n\n  onClosed(node) {\n    const { unmountOnClose } = this.props\n    // so all methods get called before it is unmounted\n    this.props.onClosed()\n    (this.props.modalTransition.onExited || noop)(node)\n\n    if (unmountOnClose) {\n      this.destroy()\n    }\n    this.close()\n\n    if (this._isMounted) {\n      this.setState({ isOpen: false })\n    }\n  }\n\n  setFocus() {\n    if (\n      this._dialog &&\n      this._dialog.parentNode &&\n      typeof this._dialog.parentNode.focus === \"function\"\n    ) {\n      this._dialog.parentNode.focus()\n    }\n  }\n\n  getFocusableChildren() {\n    return this._element.querySelectorAll(focusableElements.join(\", \"))\n  }\n\n  getFocusedChild() {\n    let currentFocus\n    const focusableChildren = this.getFocusableChildren()\n\n    try {\n      currentFocus = document.activeElement\n    } catch (err) {\n      currentFocus = focusableChildren[0]\n    }\n    return currentFocus\n  }\n\n  // not mouseUp because scrollbar fires it, shouldn't close when user scrolls\n  handleBackdropClick(e) {\n    if (e.target === this._mouseDownElement) {\n      e.stopPropagation()\n\n      const backdrop = this._dialog ? this._dialog.parentNode : null\n\n      if (backdrop && e.target === backdrop && this.props.backdrop === \"static\") {\n        this.handleStaticBackdropAnimation()\n      }\n\n      if (!this.props.isOpen || this.props.backdrop !== true) return\n\n      if (backdrop && e.target === backdrop && this.props.toggle) {\n        this.props.toggle(e)\n      }\n    }\n  }\n\n  handleTab(e) {\n    if (e.which !== 9) return\n\n    const focusableChildren = this.getFocusableChildren()\n    const totalFocusable = focusableChildren.length\n    if (totalFocusable === 0) return\n    const currentFocus = this.getFocusedChild()\n\n    let focusedIndex = 0\n\n    for (let i = 0; i < totalFocusable; i += 1) {\n      if (focusableChildren[i] === currentFocus) {\n        focusedIndex = i\n        break\n      }\n    }\n\n    if (e.shiftKey && focusedIndex === 0) {\n      e.preventDefault()\n      focusableChildren[totalFocusable - 1].focus()\n    } else if (!e.shiftKey && focusedIndex === totalFocusable - 1) {\n      e.preventDefault()\n      focusableChildren[0].focus()\n    }\n  }\n\n  handleBackdropMouseDown(e) {\n    this._mouseDownElement = e.target\n  }\n\n  handleEscape(e) {\n    if (this.props.isOpen && e.keyCode === keyCodes.esc && this.props.toggle) {\n      if (this.props.keyboard) {\n        e.preventDefault()\n        e.stopPropagation()\n\n        this.props.toggle(e)\n      } else if (this.props.backdrop === \"static\") {\n        e.preventDefault()\n        e.stopPropagation()\n\n        this.handleStaticBackdropAnimation()\n      }\n    }\n  }\n\n  handleStaticBackdropAnimation() {\n    this.clearBackdropAnimationTimeout()\n    this.setState({ showStaticBackdropAnimation: true })\n    this._backdropAnimationTimeout = setTimeout(() => {\n      this.setState({ showStaticBackdropAnimation: false })\n    }, 100)\n  }\n\n  init() {\n    try {\n      this._triggeringElement = document.activeElement\n    } catch (err) {\n      this._triggeringElement = null\n    }\n\n    if (!this._element) {\n      this._element = document.createElement(\"div\")\n      this._element.setAttribute(\"tabindex\", \"-1\")\n      this._element.style.position = \"relative\"\n      this._element.style.zIndex = this.props.zIndex\n      this._mountContainer = getTarget(this.props.container)\n      this._mountContainer.appendChild(this._element)\n    }\n\n    this._originalBodyPadding = getOriginalBodyPadding()\n    conditionallyUpdateScrollbar()\n\n    if (Modal.openCount === 0) {\n      document.body.className = classNames(\n        document.body.className,\n        mapToCssModules(\"modal-open\", this.props.cssModule)\n      )\n    }\n\n    Modal.openCount += 1\n  }\n\n  destroy() {\n    if (this._element) {\n      this._mountContainer.removeChild(this._element)\n      this._element = null\n    }\n\n    this.manageFocusAfterClose()\n  }\n\n  manageFocusAfterClose() {\n    if (this._triggeringElement) {\n      const { returnFocusAfterClose } = this.props\n      if (this._triggeringElement.focus && returnFocusAfterClose) this._triggeringElement.focus()\n      this._triggeringElement = null\n    }\n  }\n\n  close() {\n    if (Modal.openCount <= 1) {\n      const modalOpenClassName = mapToCssModules(\"modal-open\", this.props.cssModule)\n      // Use regex to prevent matching `modal-open` as part of a different class, e.g. `my-modal-opened`\n      const modalOpenClassNameRegex = new RegExp(`(^| )${modalOpenClassName}( |$)`)\n      document.body.className = document.body.className.replace(modalOpenClassNameRegex, \" \").trim()\n    }\n    this.manageFocusAfterClose()\n    Modal.openCount = Math.max(0, Modal.openCount - 1)\n\n    setScrollbarWidth(this._originalBodyPadding)\n  }\n\n  renderModalDialog() {\n    const attributes = omit(this.props, propsToOmit)\n    const dialogBaseClass = \"modal-dialog\"\n\n    return (\n      <div\n        {...attributes}\n        className={mapToCssModules(\n          classNames(dialogBaseClass, this.props.className, {\n            [`modal-${this.props.size}`]: this.props.size,\n            [`${dialogBaseClass}-centered`]: this.props.centered,\n            [`${dialogBaseClass}-scrollable`]: this.props.scrollable\n          }),\n          this.props.cssModule\n        )}\n        role=\"document\"\n        ref={c => {\n          this._dialog = c\n        }}\n      >\n        <div\n          className={mapToCssModules(\n            classNames(\"modal-content\", this.props.contentClassName),\n            this.props.cssModule\n          )}\n        >\n          {this.props.children}\n        </div>\n      </div>\n    )\n  }\n\n  render() {\n    const { unmountOnClose } = this.props\n\n    if (!!this._element && (this.state.isOpen || !unmountOnClose)) {\n      const isModalHidden = !!this._element && !this.state.isOpen && !unmountOnClose\n      this._element.style.display = isModalHidden ? \"none\" : \"block\"\n\n      const {\n        wrapClassName,\n        modalClassName,\n        backdropClassName,\n        cssModule,\n        isOpen,\n        backdrop,\n        role,\n        labelledBy,\n        external,\n        innerRef\n      } = this.props\n\n      const modalAttributes = {\n        onClick: this.handleBackdropClick,\n        onMouseDown: this.handleBackdropMouseDown,\n        onKeyUp: this.handleEscape,\n        onKeyDown: this.handleTab,\n        style: { display: \"block\" },\n        \"aria-labelledby\": labelledBy,\n        role,\n        tabIndex: \"-1\"\n      }\n\n      const hasTransition = this.props.fade\n      const modalTransition = {\n        ...Fade.defaultProps,\n        ...this.props.modalTransition,\n        baseClass: hasTransition ? this.props.modalTransition.baseClass : \"\",\n        timeout: hasTransition ? this.props.modalTransition.timeout : 0\n      }\n      const backdropTransition = {\n        ...Fade.defaultProps,\n        ...this.props.backdropTransition,\n        baseClass: hasTransition ? this.props.backdropTransition.baseClass : \"\",\n        timeout: hasTransition ? this.props.backdropTransition.timeout : 0\n      }\n\n      const Backdrop =\n        backdrop &&\n        (hasTransition ? (\n          <Fade\n            {...backdropTransition}\n            in={isOpen && !!backdrop}\n            cssModule={cssModule}\n            className={mapToCssModules(classNames(\"modal-backdrop\", backdropClassName), cssModule)}\n          />\n        ) : (\n          <div\n            className={mapToCssModules(\n              classNames(\"modal-backdrop\", \"show\", backdropClassName),\n              cssModule\n            )}\n          />\n        ))\n\n      return (\n        <Portal node={this._element}>\n          <div className={mapToCssModules(wrapClassName)}>\n            <Fade\n              {...modalAttributes}\n              {...modalTransition}\n              in={isOpen}\n              onEntered={this.onOpened}\n              onExited={this.onClosed}\n              cssModule={cssModule}\n              className={mapToCssModules(\n                classNames(\n                  \"modal\",\n                  modalClassName,\n                  this.state.showStaticBackdropAnimation && \"modal-static\"\n                ),\n                cssModule\n              )}\n              innerRef={innerRef}\n            >\n              {external}\n              {this.renderModalDialog()}\n            </Fade>\n            {Backdrop}\n          </div>\n        </Portal>\n      )\n    }\n    return null\n  }\n\n  clearBackdropAnimationTimeout() {\n    if (this._backdropAnimationTimeout) {\n      clearTimeout(this._backdropAnimationTimeout)\n      this._backdropAnimationTimeout = undefined\n    }\n  }\n}\n\nModal.propTypes = propTypes\nModal.defaultProps = defaultProps\nModal.openCount = 0\n\nModal.Body = ModalBody\nModal.Header = ModalHeader\nModal.Footer = ModalFooter\n\nexport default Modal\n"]},"metadata":{},"sourceType":"module"}